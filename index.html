<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>剩食平台</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <h1>剩食平台</h1>
        <nav>
            <a href="index.html">首頁</a>
            <a href="#">關於我們</a>
            <a href="#">聯絡我們</a>
        </nav>
    </header>

    <!-- 推薦剩食 -->
    <main>
        <section id="featured">
            <h2>推薦剩食</h2>
            <div class="item-list">
                <div class="item">
                    <img src="images/food1.jpg" alt="食物1">
                    <p>剩食名稱 1</p>
                </div>
                <div class="item">
                    <img src="images/food2.jpg" alt="食物2">
                    <p>剩食名稱 2</p>
                </div>
            </div>
        </section>

        <!-- 上傳剩食 -->
        <section id="upload">
            <h2>上傳剩食資訊</h2>
            <form id="foodForm">
                <input type="text" id="foodName" placeholder="食物名稱" required>
                <input type="text" id="foodLocation" placeholder="位置" required>
                <input type="file" id="foodImage" accept="image/*">
                <button type="submit">上傳</button>
            </form>
            <div id="foodList"></div>
        </section>

        <!-- 地圖 -->
        <section id="map">
            <h2>剩食地圖</h2>
            <div id="mapid" style="height: 400px;"></div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 剩食平台</p>
    </footer>

    <!-- JS -->
    <script>
        // 使用者上傳模擬
        const form = document.getElementById('foodForm');
        const foodList = document.getElementById('foodList');

        form.addEventListener('submit', function(e){
            e.preventDefault();
            const name = document.getElementById('foodName').value;
            const loc = document.getElementById('foodLocation').value;
            const fileInput = document.getElementById('foodImage');
            const file = fileInput.files[0];

            const div = document.createElement('div');
            div.style.marginTop = '10px';

            // 顯示文字
            const text = document.createElement('p');
            text.textContent = `食物: ${name} / 地點: ${loc}`;
            div.appendChild(text);

            // 顯示圖片（前端暫存）
            if(file){
                const img = document.createElement('img');
                img.style.width = '200px';
                img.style.height = '150px';
                img.style.objectFit = 'cover';
                img.style.marginTop = '5px';
                img.src = URL.createObjectURL(file);  // 前端暫存檔案
                div.appendChild(img);
            }

            foodList.appendChild(div);

            // 模擬在地圖上新增標記
            if(window.map) {
                L.marker([25.033 + Math.random()/100, 121.565 + Math.random()/100])
                 .addTo(map)
                 .bindPopup(`<b>${name}</b><br>${loc}`);
            }

            form.reset();
        });

        // Leaflet 地圖
        var map = L.map('mapid').setView([25.033, 121.565], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // 假資料標記
        L.marker([25.034, 121.565]).addTo(map).bindPopup('<b>剩食名稱 1</b><br>地址 1');
        L.marker([25.032, 121.566]).addTo(map).bindPopup('<b>剩食名稱 2</b><br>地址 2');
    </script>
</body>
</html>
